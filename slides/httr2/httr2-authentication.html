<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.555">

  <title>Web APIs with R Book Club - Tell APIs who you are</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; background-color: #2a0f15; font-weight: bold; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Tell APIs who you are</h1>

<div class="quarto-title-authors">
</div>

</section>
<section id="todo" class="title-slide slide level1 center">
<h1>TODO</h1>
<div>
<ul>
<li>Emphasize difference between working with what people have done vs understanding how things SHOULD work (knowing the OAuth2 specification backwards and forwards isn’t helpful when people use nonstandard terminology or implement something weird; PKCE often doesn’t work, for example)</li>
<li>Make sure this makes sense before pagination.</li>
</ul>
</div>
</section>

<section id="learning-objectives" class="title-slide slide level1 center">
<h1>️✅ Learning objectives</h1>
<div>
<ul>
<li>Provide information in your request about how you’re accessing the API.</li>
<li>Find authentication information in API docs.</li>
<li>Authenticate a request with an API key.</li>
<li>Authenticate a request with OAuth.</li>
</ul>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">library</span>(httr2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>

<section>
<section id="how-can-i-tell-the-api-how-im-accessing-it" class="title-slide slide level1 center">
<h1>How can I tell the API how I’m accessing it?</h1>

</section>
<section id="what-is-a-user-agent" class="slide level2">
<h2>What is a user agent?</h2>
<ul>
<li class="fragment">“User agent” = software that accesses the web</li>
<li class="fragment"><code>User-Agent</code> request header = string IDing the “user agent”
<ul>
<li class="fragment">Request header = extra info sent with request</li>
</ul></li>
<li class="fragment">{httr2} attaches a default <code>User-Agent</code> header</li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a>httr2<span class="sc">::</span><span class="fu">request</span>(<span class="st">"https://example.com"</span>) <span class="sc">|&gt;</span> httr2<span class="sc">::</span><span class="fu">req_dry_run</span>()</span>
<span id="cb2-2"><a></a><span class="co">#&gt; GET / HTTP/1.1</span></span>
<span id="cb2-3"><a></a><span class="co">#&gt; Host: example.com</span></span>
<span id="cb2-4"><a></a><span class="co">#&gt; User-Agent: httr2/1.0.1 r-curl/5.2.1 libcurl/8.3.0</span></span>
<span id="cb2-5"><a></a><span class="co">#&gt; Accept: */*</span></span>
<span id="cb2-6"><a></a><span class="co">#&gt; Accept-Encoding: deflate, gzip</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<aside class="notes">
<ul>
<li>It’s arguable whether <em>your code</em> is the user agent or <em>httr2</em> is.</li>
<li>Headers are the things at the top of a request, outside the request itself
<ul>
<li>Usually what you’re expecting back + user agent</li>
</ul></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="should-i-override-the-default-user-agent" class="slide level2">
<h2>Should I override the default user agent?</h2>
<ul>
<li class="fragment">Are you hitting the API <strong><em>a lot?</em></strong></li>
<li class="fragment">Are you providing reusable code for others to hit the API?</li>
<li class="fragment">Does the API documentation mention it?</li>
</ul>
<aside class="notes">
<ul>
<li>Default is fine almost all the time</li>
<li>Include UA in package (with option for user to expand)</li>
<li>If you use your code repeatedly/automatically, provide a UA</li>
<li>Documentation might ask for it (like Jim found in api.crossref.org docs)</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="how-do-i-override-the-default-user-agent" class="slide level2">
<h2>How do I override the default user agent?</h2>
<p><code>httr2::req_user_agent(req, string = NULL)</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>httr2<span class="sc">::</span><span class="fu">request</span>(<span class="st">"https://example.com"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb3-2"><a></a>  httr2<span class="sc">::</span><span class="fu">req_user_agent</span>(<span class="st">"MyUserAgent/1.0 (more details; separate with ;)"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb3-3"><a></a>  httr2<span class="sc">::</span><span class="fu">req_dry_run</span>()</span>
<span id="cb3-4"><a></a><span class="co">#&gt; GET / HTTP/1.1</span></span>
<span id="cb3-5"><a></a><span class="co">#&gt; Host: example.com</span></span>
<span id="cb3-6"><a></a><span class="co">#&gt; User-Agent: MyUserAgent/1.0 (more details; separate with ;)</span></span>
<span id="cb3-7"><a></a><span class="co">#&gt; Accept: */*</span></span>
<span id="cb3-8"><a></a><span class="co">#&gt; Accept-Encoding: deflate, gzip</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes">
<ul>
<li>Convention is Software slash version,</li>
<li>Details in parentheses,</li>
<li>Separate with ;</li>
<li>But can be any string</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="an-experimental-.rprofile-user-agent-function" class="slide level2">
<h2>An experimental .Rprofile user agent function</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a>.httr2_ua <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb4-2"><a></a>  <span class="co"># Recreate the default httr2 string.</span></span>
<span id="cb4-3"><a></a>  versions <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb4-4"><a></a>    <span class="at">httr2 =</span> <span class="fu">as.character</span>(utils<span class="sc">::</span><span class="fu">packageVersion</span>(<span class="st">"httr2"</span>)),</span>
<span id="cb4-5"><a></a>    <span class="st">`</span><span class="at">r-curl</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">as.character</span>(utils<span class="sc">::</span><span class="fu">packageVersion</span>(<span class="st">"curl"</span>)),</span>
<span id="cb4-6"><a></a>    <span class="at">libcurl =</span> curl<span class="sc">::</span><span class="fu">curl_version</span>()<span class="sc">$</span>version</span>
<span id="cb4-7"><a></a>  )</span>
<span id="cb4-8"><a></a>  <span class="fu">paste0</span>(<span class="fu">names</span>(versions), <span class="st">"/"</span>, versions, <span class="at">collapse =</span> <span class="st">" "</span>)</span>
<span id="cb4-9"><a></a>}</span>
<span id="cb4-10"><a></a>.req_ua <span class="ot">&lt;-</span> <span class="cf">function</span>(req) {</span>
<span id="cb4-11"><a></a>  httr2_string <span class="ot">&lt;-</span> <span class="fu">.httr2_ua</span>()</span>
<span id="cb4-12"><a></a>  me <span class="ot">&lt;-</span> <span class="st">"Jon Harmon"</span></span>
<span id="cb4-13"><a></a>  url <span class="ot">&lt;-</span> <span class="st">"https://wapir.io"</span></span>
<span id="cb4-14"><a></a>  email <span class="ot">&lt;-</span> <span class="st">"jonthegeek+useragent@gmail.com"</span></span>
<span id="cb4-15"><a></a>  string <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(</span>
<span id="cb4-16"><a></a>    <span class="st">"{httr2_string} ({me}; {url}; mailto:{email})"</span></span>
<span id="cb4-17"><a></a>  )</span>
<span id="cb4-18"><a></a>  httr2<span class="sc">::</span><span class="fu">req_user_agent</span>(req, <span class="at">string =</span> string)</span>
<span id="cb4-19"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes">
<ul>
<li>usethis::edit_r_profile()</li>
<li>Start with <code>.</code> so it doesn’t show in my environment.</li>
<li>In general, UA should tell the API how you’re accessing it</li>
<li>I’ll likely put a version of this into {nectar} soon.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="how-can-i-find-authentication-information" class="title-slide slide level1 center">
<h1>How can I find authentication information?</h1>

</section>
<section id="what-is-authentication" class="slide level2">
<h2>What is authentication?</h2>
<ul>
<li class="fragment"><strong>Authentication:</strong> Verifying who you are.</li>
<li class="fragment"><strong>Authorization:</strong> Granting permissions to do things (based on authentication)</li>
<li class="fragment"><strong>Auth:</strong> Used interchangeably for both</li>
</ul>
<aside class="notes">
<ul>
<li>Internet makes a big deal about this distinction if you Google</li>
<li>For users, the difference doesn’t matter
<ul>
<li>You auth with the server so the server will auth you</li>
</ul></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="what-are-some-types-of-authentication" class="slide level2">
<h2>What are some types of authentication?</h2>
<div class="fragment">
<p>🔴 <strong>HTTP Basic:</strong> username + password sent with request</p>
</div>
<div class="fragment">
<div class="line-block">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;📜 <em>deed to your house</em></div>
</div>
<div class="fragment">
<p>🟠 <strong>API Key:</strong> password-like thing sent with request</p>
</div>
<div class="fragment">
<div class="line-block">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;🔑 <em>key to your house</em></div>
</div>
<div class="fragment">
<p>🟡 <strong>Bearer Token:</strong> shorter-lived, limited key</p>
</div>
<div class="fragment">
<div class="line-block">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;💳 <em>keycard</em></div>
</div>
<div class="fragment">
<p>🟢 <strong>OAuth:</strong> multistep process to generate a bearer token</p>
</div>
<div class="fragment">
<div class="line-block">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;🕵️ <em>background check to issue keycard</em></div>
</div>
<aside class="notes">
<ul>
<li>Almost nobody uses HTTP basic for APIs anymore.</li>
<li>If you gave an ex a key to your house, you can change the lock without disrupting your life too much</li>
<li>Name “bearer token” is stupid; anybody can use an API key, too, so the “bearer” part is weird to highlight</li>
<li>Nothing enforces difference between bearer tokens and api keys; it’s a vocabulary thing, which API makers might screw up</li>
<li>Keycard can be limited to open certain doors, not open others</li>
<li>End result of OAuth is a bearer token</li>
<li>There are other things, but these four cover almost everything.</li>
<li>Other schemes like api keys in cookies, SSL certs not discussed here</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="api-auth-documentation" class="slide level2">
<h2>API Auth Documentation</h2>
<ul>
<li class="fragment">Sadly, no standard</li>
<li class="fragment"><a href="https://api.open.fec.gov/developers">OpenFEC</a></li>
<li class="fragment"><a href="https://developers.google.com/calendar/api/guides/overview">Google Calendar</a></li>
</ul>
<aside class="notes">
<ul>
<li>Usually either at top of docs or in each relevant endpoint</li>
<li>Sometimes different endpoints have different requirements (particularly OAuth scopes, more below)
<ul>
<li>This endpoint only requires read, this one requires read and write</li>
</ul></li>
<li>Often docs give the basics, but might not have all details for actually using OAuth in code, for example.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="openapi-securityschemes" class="slide level2">
<h2>OpenAPI: securitySchemes</h2>
<p>If you have the APID, use it!</p>
<ul>
<li class="fragment"><code>components$securitySchemes</code> = ways to auth</li>
<li class="fragment"><code>security</code> (top level) = default schemes</li>
<li class="fragment"><a href="https://api.apis.guru/v2/specs/fec.gov/1.0/openapi.yaml">OpenFEC</a></li>
<li class="fragment"><a href="https://api.apis.guru/v2/specs/googleapis.com/calendar/v3/openapi.yaml">Google Calendar</a></li>
</ul>
<aside class="notes">
<ul>
<li>APID = API description in OpenAPI format</li>
<li>Often still necessary to dig through docs for details</li>
<li>I suspect the 2 “apiKey in query” schemes for OpenFEC are the default key vs a user-specific key, their way of implementing scopes.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="how-can-i-prepare-my-system-for-authentication" class="title-slide slide level1 center">
<h1>How can I prepare my system for authentication?</h1>

</section>
<section id="practice-safe-git" class="slide level2">
<h2>Practice safe git</h2>
<ul>
<li class="fragment">Run <code>usethis::git_vaccinate()</code></li>
<li class="fragment">Often <code>usethis::use_git_ignore(".Renviron")</code></li>
</ul>
<aside class="notes">
<ul>
<li><code>git_vaccinate()</code> “Adds <code>Rproj.user</code>, <code>.Rhistory</code>, <code>.Rdata</code>, <code>.httr-oauth</code>, <code>.DS_Store</code>, and <code>.quarto</code> to your global (a.k.a. user-level) <code>.gitignore</code>.”</li>
<li>httr2 actually puts auth info in a more-secure, harder-to-check-in place.</li>
<li>We’ll often put keys in personal .Renviron, but you might want a project-specific one for special keys.</li>
<li>Even better: use {keyring} (TODO: Go down this rabbit hole!)</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="use-keyring" class="slide level2">
<h2>Use keyring</h2>
<ul>
<li class="fragment"><code>install.packages("keyring")</code></li>
<li class="fragment"><code>keyring::key_set(service)</code>
<ul>
<li class="fragment"><code>keyring::key_set("FEC_API_KEY")</code></li>
</ul></li>
<li class="fragment"><code>keyring::key_set_with_value(service, password = NULL)</code></li>
<li class="fragment"><code>keyring::key_get(service)</code></li>
<li class="fragment">May need to copy keyring to env for packages
<ul>
<li class="fragment"><code>Sys.setenv(FEC_API_KEY = keyring::key_get("FEC_API_KEY"))</code></li>
</ul></li>
</ul>
<aside class="notes">
<ul>
<li>{keyring} works with your operating system’s key manager</li>
<li><code>key_set()</code> has you enter the key in a secure password window</li>
<li><code>key_set_with_value()</code> useful if a function fetches a key (you never need to see it)</li>
<li><code>key_get()</code> returns that key</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="how-can-i-authenticate-a-request-using-api-keys" class="title-slide slide level1 center">
<h1>How can I authenticate a request using API keys?</h1>

</section>
<section id="where-do-i-send-api-keys" class="slide level2">
<h2>Where do I send API keys?</h2>
<ul>
<li class="fragment"><code>in: query</code>
<ul>
<li class="fragment"><code>httr2::req_url_query(.req, ...)</code></li>
</ul></li>
<li class="fragment"><code>in: header</code>
<ul>
<li class="fragment"><code>httr2::req_headers(.req, ..., .redact = NULL)</code></li>
<li class="fragment"><code>.redact</code> = character vector of headers to hide in print</li>
</ul></li>
<li class="fragment"><code>in: cookie</code>
<ul>
<li class="fragment"><code>httr2::req_headers(.req, Cookie = "name=val1; name2=val2", .redact = "Cookie")</code></li>
</ul></li>
</ul>
<aside class="notes">
<ul>
<li>APID does a good job of describing where these can go.</li>
<li>Header more secure than query, so use that when available</li>
<li><code>...</code> = name-value pairs, case-insensitive (but usually just copy-paste from docs).</li>
<li>Cookies are meaningful in the browser, but for your code it’s easiest just to think of them as a type of header.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="how-can-i-authenticate-fecapi-requests" class="slide level2">
<h2>How can I authenticate FECAPI requests?</h2>
<p><a href="https://api.apis.guru/v2/specs/fec.gov/1.0/openapi.yaml">OpenFEC APID</a></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a><span class="fu">request</span>(<span class="st">"https://api.open.fec.gov/v1"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a></a>  <span class="fu">req_headers</span>(<span class="st">"X-Api-Key"</span> <span class="ot">=</span> <span class="st">"DEMO_KEY"</span>, <span class="at">.redact =</span> <span class="st">"X-Api-Key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a><span class="co">#&gt; &lt;httr2_request&gt;</span></span>
<span id="cb6-2"><a></a><span class="co">#&gt; GET https://api.open.fec.gov/v1</span></span>
<span id="cb6-3"><a></a><span class="co">#&gt; Headers:</span></span>
<span id="cb6-4"><a></a><span class="co">#&gt; • X-Api-Key: '&lt;REDACTED&gt;'</span></span>
<span id="cb6-5"><a></a><span class="co">#&gt; Body: empty</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a><span class="fu">request</span>(<span class="st">"https://api.open.fec.gov/v1"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a></a>  <span class="fu">req_headers</span>(<span class="st">"X-Api-Key"</span> <span class="ot">=</span> keyring<span class="sc">::</span><span class="fu">key_get</span>(<span class="st">"FEC_API_KEY"</span>), <span class="at">.redact =</span> <span class="st">"X-Api-Key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a><span class="co">#&gt; &lt;httr2_request&gt;</span></span>
<span id="cb8-2"><a></a><span class="co">#&gt; GET https://api.open.fec.gov/v1</span></span>
<span id="cb8-3"><a></a><span class="co">#&gt; Headers:</span></span>
<span id="cb8-4"><a></a><span class="co">#&gt; • X-Api-Key: '&lt;REDACTED&gt;'</span></span>
<span id="cb8-5"><a></a><span class="co">#&gt; Body: empty</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<aside class="notes">
<ul>
<li>Notice that the key never prints anywhere in the keyring version</li>
<li>Sys.getenv() is also an option, but then the key is stored in plain text in your .Renviron file.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="authenticating-with-nectar" class="slide level2">
<h2>Authenticating with nectar</h2>
<p><a href="https://nectar.api2r.org">{nectar}</a> 📦 translates APID to {httr2}</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a><span class="fu">request</span>(<span class="st">"https://api.open.fec.gov/v1"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a></a>  nectar<span class="sc">::</span><span class="fu">req_auth_api_key</span>(</span>
<span id="cb9-3"><a></a>    <span class="at">location =</span> <span class="st">"header"</span>, </span>
<span id="cb9-4"><a></a>    <span class="at">parameter_name =</span> <span class="st">"X-Api-Key"</span>, </span>
<span id="cb9-5"><a></a>    <span class="at">api_key =</span> <span class="fu">Sys.getenv</span>(<span class="st">"FEC_API_KEY"</span>)</span>
<span id="cb9-6"><a></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a><span class="co">#&gt; &lt;httr2_request&gt;</span></span>
<span id="cb10-2"><a></a><span class="co">#&gt; GET https://api.open.fec.gov/v1</span></span>
<span id="cb10-3"><a></a><span class="co">#&gt; Headers:</span></span>
<span id="cb10-4"><a></a><span class="co">#&gt; • X-Api-Key: '&lt;REDACTED&gt;'</span></span>
<span id="cb10-5"><a></a><span class="co">#&gt; Body: empty</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<aside class="notes">
<ul>
<li>Technically only PART of the purpose of {nectar}</li>
<li>Aimed primarily at package authors, but I’m finding more and more use cases</li>
<li>I’ll recommend it for book helper functions</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="how-can-i-authenticate-a-request-using-oauth" class="title-slide slide level1 center">
<h1>How can I authenticate a request using OAuth?</h1>

</section>
<section id="oauth-terminology-participants" class="slide level2">
<h2>Oauth terminology: Participants</h2>
<table class="caption-top">
<thead>
<tr class="header">
<th>term(s)</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>user</strong></td>
<td>the person who you’re acting as</td>
</tr>
<tr class="even">
<td>application, <strong>app</strong></td>
<td>your R code</td>
</tr>
<tr class="odd">
<td><strong>client</strong>, oauth application</td>
<td>you create this at oauth host</td>
</tr>
<tr class="even">
<td>oauth <strong>host</strong></td>
<td>the API</td>
</tr>
</tbody>
</table>
<aside class="notes">
<ul>
<li>Oauth is complicated! Don’t feel bad if you’re confused!</li>
<li>We’ll go over the “dance” on an upcoming slide</li>
<li>The point of the multiple steps is to make it hard for attacker to intercept, and minimize what they can do if they do</li>
<li>Also to allow third parties to act on your behalf; can be confusing, because we’re both the user and the app!</li>
<li>Bold = what I’ll call it on other pages</li>
<li>App could be package, could be website, could be a separate API (“login with Google”)</li>
<li>Client has an id and a secret, that’s how your <em>app</em> logs in
<ul>
<li>We’ll talk more about these in a minute</li>
</ul></li>
<li>Client also has settings like valid redirect URLs (next slide)</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="oauth-terminology-things" class="slide level2">
<h2>Oauth terminology: Things</h2>
<table class="caption-top">
<colgroup>
<col style="width: 38%">
<col style="width: 61%">
</colgroup>
<thead>
<tr class="header">
<th>term(s)</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>scope</strong></td>
<td>string(s) describing specific capabilities</td>
</tr>
<tr class="even">
<td><strong>auth</strong>orization <strong>code</strong></td>
<td>very temporary key</td>
</tr>
<tr class="odd">
<td><strong>oauth token</strong>, token</td>
<td>the real key, often with extra info</td>
</tr>
</tbody>
</table>
<aside class="notes">
<ul>
<li>If app only hits read endpoints, only needs to request read scopes
<ul>
<li>Or if this user has only asked to read</li>
</ul></li>
<li>Auth code can only be sent to specified URLs</li>
<li>The “real key” here is a bearer token.</li>
<li>Token often includes a “refresh token”, longer-lived shortcut around the auth process.
<ul>
<li>“This user already gave me permission, I just need an updated keycard.”</li>
</ul></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="oauth-terminology-places" class="slide level2">
<h2>Oauth terminology: Places</h2>
<table class="caption-top">
<colgroup>
<col style="width: 38%">
<col style="width: 61%">
</colgroup>
<thead>
<tr class="header">
<th>term(s)</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>auth</strong>orization <strong>url</strong></td>
<td>where to send initial request</td>
</tr>
<tr class="even">
<td><strong>redirect url(s)</strong></td>
<td>where <strong>host</strong> can send <strong>auth codes</strong></td>
</tr>
<tr class="odd">
<td><strong>token url</strong></td>
<td>where <strong>app</strong> can exchange <strong>auth codes</strong></td>
</tr>
</tbody>
</table>
<aside class="notes">
<ul>
<li>User is sent to auth url in browser, sees authorization request directly from host</li>
<li>Auth code can <em>only</em> be sent to redirect URLs
<ul>
<li>Often will be localhost, where httr2 sets up a web host to listens for a response</li>
<li>Isn’t default, but you often need to specify a port for host to accept this as a valid redirect</li>
</ul></li>
<li>Request from app to token url is sent server-to-server, no user/browser in-between. Auth code in header in this case, generally.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-oauth-dance" class="slide level2">
<h2>The OAuth “dance”</h2>
<ul>
<li class="fragment"><strong>user</strong> to <strong>app</strong>: Hit this API for me!</li>
<li class="fragment">&lt;<strong>app</strong> sends <strong>user</strong> to <strong>host</strong> @ <strong>auth url</strong> in browser&gt;</li>
<li class="fragment"><strong>host</strong> to <strong>user</strong>: Can <strong>client</strong> act as you with these <strong>scopes</strong>?</li>
<li class="fragment"><strong>user</strong> to <strong>host</strong>: Yes</li>
<li class="fragment">&lt;<strong>host</strong> sends <strong>user</strong> to <strong>app</strong> @ <strong>redirect url</strong> with <strong>auth code</strong>&gt;</li>
<li class="fragment"><strong>app</strong> directly to <strong>host</strong> @ <strong>token url</strong>: Here’s my <strong>client</strong> + user’s <strong>auth code</strong></li>
<li class="fragment"><strong>host</strong> directly to <strong>app</strong>: Here’s an <strong>oauth token</strong> for that user (with the requested permissions)</li>
</ul>
<aside class="notes">
<p>TODO: Image of OAuth dance</p>
<ul>
<li>This is sometimes called 3-legged auth
<ul>
<li>Took me forever to differentiate “app” from “user” to make the 3 legs make sense</li>
<li>Host is at multiple urls but it just counts as one leg</li>
</ul></li>
<li>Step 2: App sends client id and permissions as part of that introduction</li>
<li>Not covered: Then (not much) later app sends bearer token to host with API requests, and host checks that token can do those things.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="oauth-credential-dangers" class="slide level2">
<h2>OAuth credential dangers</h2>
<ul>
<li class="fragment">🟢 Client id: Like knowing package name</li>
<li class="fragment">🟡 Authorization code: Unlikely to be an issue
<ul>
<li class="fragment">Only sent to provided redirect url</li>
<li class="fragment">Extremely short lived (often minutes or less)</li>
</ul></li>
<li class="fragment">🟡 Refresh token:
<ul>
<li class="fragment">This + client secret for access token</li>
<li class="fragment">Usually revoked if you auth from scratch</li>
</ul></li>
</ul>
<aside class="notes">
<ul>
<li>Yellows here are light green, really</li>
<li>Auth code: Need client secret for it to do anything</li>
<li>Refresh token: Longer lived, but otherwise similar to auth code</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="oauth-credential-dangers-cont" class="slide level2">
<h2>OAuth credential dangers (cont)</h2>
<ul>
<li class="fragment">🟡 Client secret: Iffy
<ul>
<li class="fragment">Can pretend to be you (user still needs to say ok)</li>
<li class="fragment">Can your <strong>client</strong> do anything special?
<ul>
<li class="fragment">Installed (e.g.&nbsp;Slack app)?</li>
<li class="fragment">API usage limits (e.g.&nbsp;YouTube)?</li>
</ul></li>
</ul></li>
<li class="fragment">🟠 Access token: The thing we’re protecting
<ul>
<li class="fragment">Can do whatever it’s authorized to do</li>
<li class="fragment">Usually easy to revoke</li>
</ul></li>
<li class="fragment">🔴 Username + password: We don’t want to know these</li>
</ul>
<aside class="notes">
<ul>
<li>Hadley says client secrets aren’t a big deal, but I disagree in a lot of cases.</li>
<li>Your auth page at host can be copied, so that’s not a real concern, but…</li>
<li>If localhost is valid redirect, they can trick user to auth as you</li>
<li>Only matters if client itself can do something</li>
<li>YouTube has client limits in addition to user limits</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="how-can-i-use-oauth-in-r" class="title-slide slide level1 center">
<h1>How can I use OAuth in R?</h1>

</section>
<section id="configure-your-client" class="slide level2">
<h2>Configure your client</h2>
<p>Construct one client object for your code</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>httr2<span class="sc">::</span><span class="fu">oauth_client</span>(</span>
<span id="cb11-2"><a></a>  id, </span>
<span id="cb11-3"><a></a>  token_url, </span>
<span id="cb11-4"><a></a>  <span class="at">secret =</span> <span class="cn">NULL</span>, </span>
<span id="cb11-5"><a></a>  <span class="at">key =</span> <span class="cn">NULL</span>, </span>
<span id="cb11-6"><a></a>  <span class="at">auth =</span> <span class="fu">c</span>(<span class="st">"body"</span>, <span class="st">"header"</span>, <span class="st">"jwt_sig"</span>), </span>
<span id="cb11-7"><a></a>  <span class="at">auth_params =</span> <span class="fu">list</span>(), </span>
<span id="cb11-8"><a></a>  <span class="at">name =</span> <span class="fu">hash</span>(id)</span>
<span id="cb11-9"><a></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes">
<ul>
<li><code>id</code> = Client ID</li>
<li><code>token_url</code> = URL where clients exchange authorization codes for tokens</li>
<li><code>secret</code> = Client secret</li>
<li>Often <code>auth = "header"</code></li>
<li>If this client has multiple uses: <code>name</code> = unique for this use case
<ul>
<li>Defines where tokens are cached</li>
<li>Eg, Log in once for personal, another time for work (but see cache_key in next function)</li>
</ul></li>
<li>I don’t know yet why we don’t specify <code>auth_url</code> here (it’s in a later step)</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="oauth-client-demo" class="slide level2">
<h2>OAuth client demo</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a>yt_client <span class="ot">&lt;-</span> <span class="fu">oauth_client</span>(</span>
<span id="cb12-2"><a></a>  <span class="at">id =</span> <span class="fu">Sys.getenv</span>(<span class="st">"YOUTUBE_CLIENT_ID"</span>), </span>
<span id="cb12-3"><a></a>  <span class="at">token_url =</span> <span class="st">"https://oauth2.googleapis.com/token"</span>,</span>
<span id="cb12-4"><a></a>  <span class="at">secret =</span> <span class="fu">Sys.getenv</span>(<span class="st">"YOUTUBE_CLIENT_SECRET"</span>)</span>
<span id="cb12-5"><a></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="httr2req_oauth_auth_code" class="slide level2 unnumbered">
<h2>httr2::req_oauth_auth_code()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>httr2<span class="sc">::</span><span class="fu">req_oauth_auth_code</span>(</span>
<span id="cb13-2"><a></a>  req,</span>
<span id="cb13-3"><a></a>  client,</span>
<span id="cb13-4"><a></a>  auth_url,</span>
<span id="cb13-5"><a></a>  <span class="at">scope =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-6"><a></a>  <span class="at">pkce =</span> <span class="cn">TRUE</span>,</span>
<span id="cb13-7"><a></a>  <span class="at">auth_params =</span> <span class="fu">list</span>(),</span>
<span id="cb13-8"><a></a>  <span class="at">token_params =</span> <span class="fu">list</span>(),</span>
<span id="cb13-9"><a></a>  <span class="at">redirect_uri =</span> <span class="fu">oauth_redirect_uri</span>(),</span>
<span id="cb13-10"><a></a>  <span class="at">cache_disk =</span> <span class="cn">FALSE</span>,</span>
<span id="cb13-11"><a></a>  <span class="at">cache_key =</span> <span class="cn">NULL</span></span>
<span id="cb13-12"><a></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes">
<ul>
<li>I’m trying to figure out why <code>auth_url</code> isn’t wrapped in client
<ul>
<li>Best guess is there are use cases of same client at different auth urls</li>
<li>Maybe YouTube does this?</li>
<li>Dev vs production?</li>
</ul></li>
<li><code>pkce</code> = “Proof key for code exchange”. Good if API supports it, but I often have to turn it off</li>
<li>I can’t think of examples of auth_params or token_params
<ul>
<li>would be ~headers required by host</li>
<li>auth_params sent to auth_url, token_params sent to token_url</li>
</ul></li>
<li><code>cache_disk</code> = Set this <code>TRUE</code> if you can
<ul>
<li><code>cache_key</code> = unique name if you’ll use this client for multiple tokens</li>
</ul></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="oauth-request-demo" class="slide level2">
<h2>Oauth request demo</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a>playlists <span class="ot">&lt;-</span> <span class="fu">request</span>(<span class="st">"https://youtube.googleapis.com/youtube/v3"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a></a>  <span class="fu">req_url_path_append</span>(<span class="st">"playlists"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb14-3"><a></a>  <span class="fu">req_url_query</span>(<span class="at">part =</span> <span class="st">"snippet"</span>, <span class="at">mine =</span> <span class="cn">TRUE</span>, <span class="at">maxResults =</span> <span class="dv">50</span>) <span class="sc">|&gt;</span> </span>
<span id="cb14-4"><a></a>  <span class="fu">req_oauth_auth_code</span>(</span>
<span id="cb14-5"><a></a>    <span class="at">client =</span> yt_client, </span>
<span id="cb14-6"><a></a>    <span class="at">auth_url =</span> <span class="st">"https://accounts.google.com/o/oauth2/v2/auth"</span>,</span>
<span id="cb14-7"><a></a>    <span class="at">scope =</span> <span class="st">"https://www.googleapis.com/auth/youtube"</span>,</span>
<span id="cb14-8"><a></a>    <span class="at">redirect_uri =</span> <span class="st">"http://127.0.0.1:8888"</span></span>
<span id="cb14-9"><a></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb14-10"><a></a>  <span class="fu">req_perform</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="leftovers" class="title-slide slide level1 center">
<h1>Leftovers</h1>

</section>
<section id="automating-oauth" class="slide level2 unnumbered">
<h2>Automating OAuth</h2>
<ul>
<li class="fragment"><em>If you can,</em> use httr2 cache: easiest, but
<ul>
<li class="fragment">auto-deletes when 30 days old</li>
<li class="fragment">fills logs w/ “Caching httr2 token in …” messages</li>
</ul></li>
<li class="fragment"><code>httr2::req_oauth_bearer_jwt()</code> if you have JSON web token (service account)</li>
<li class="fragment"><code>httr2::req_oauth_refresh()</code> if you have a refresh token
<ul>
<li class="fragment"><code>httr2::oauth_flow_auth_code()</code> once to get refresh</li>
</ul></li>
</ul>
</section>
<section id="browser-cookies" class="slide level2 unnumbered">
<h2>Browser cookies</h2>
<p><em>This will feel hacky because it is hacky.</em></p>
<ul>
<li class="fragment">Install <a href="https://www.editthiscookie.com/">EditThisCookie</a> browser extension</li>
<li class="fragment">Use API in browser</li>
<li class="fragment">Open EditThisCookie extension</li>
<li class="fragment">Options &gt; “Choose the preferred export format for cookies” &gt; Netscape HTTP Cookie File</li>
<li class="fragment">Open EditThisCookie extension</li>
<li class="fragment">Export</li>
<li class="fragment">Paste into a file at <code>path</code></li>
<li class="fragment"><code>httr2::req_cookie_preserve(req, path)</code></li>
</ul>
<aside class="notes">
<ul>
<li>Or cookie can be used in header</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="meeting-videos" class="slide level2 unnumbered">
<h2>Meeting Videos</h2>
<h3 class="unnumbered" id="cohort-1">Cohort 1</h3>
<iframe src="https://www.youtube.com/embed/URL" width="100%" height="400px" data-external="1">
</iframe>
<details>
<summary>
Meeting chat log
</summary>
<pre><code>LOG</code></pre>
</details>

<div class="quarto-auto-generated-content">
<div class="footer footer-default">
<p><a href="../../" target="wapir-club_index">DSLC.io/wapir</a> | Jon Harmon | <a href="https://wapir.io" target="_blank">wapir.io</a></p>
</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/r4ds\.github\.io\/bookclub-wapir\/");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
              // target, if specified
              link.setAttribute("target", "_blank");
              if (link.getAttribute("rel") === null) {
                link.setAttribute("rel", "noopener");
              }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>