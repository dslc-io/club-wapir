---
engine: knitr
title: Find APIs
---

# ️✅ Learning objectives

::: nonincremental
-   Search the web for APIs.
-   Search for API-wrapping packages.
-   Use browser developer tools to find undocumented APIs.
:::

```{r}
#| label: apis-find-packages-used
#| eval: false
library(dplyr)
library(stringr)
library(tidyr)
library(tools)
library(httr2)
library(anyapi)
library(apisniffer)
```

# Search the web for APIs

-   [apis.guru](https://apis.guru/)
-   [Public APIs](https://publicapis.dev/)
    -   [GitHub repo](https://github.com/marcelscruz/public-apis)
-   [{site} + api](https://www.google.com/search?q=nytimes+api)
-   [developer(s).{site}](https://developer.nytimes.com/)
-   [GitHub/{organization}](https://github.com/washingtonpost)


::: notes
-   apis.guru is in the {anyapi} package (on github)
-   I plan to add Public APIs (in addition)
    -   More active dev
    -   There's an open issue to add OpenAPI specs when available
-   Google search is a GET API,
    -   But google.com/robots.txt Disallow's hitting /search.
    -   And probably need LiveHTML to get something useful out of it
-   developers.google.com
-   Sometimes api(s).{site} but I don't have an example right now
-   WaPo GitHub doesn't have an API, but it has some of what you might hope to use an API to find.
:::

# Search for API-wrapping packages

## General tips for searching

-   `tolower(FIELD)` to find "API", "api", "Api", etc
-   `\\b` in regex pattern for "word ***b***oundary"
    -   `"\\bapi\\b"` = "api surrounded by spaces, (), newline, etc"

## Searching CRAN packages {-}

```{r pkgs-cran, eval = FALSE}
# TODO: Re-enable this when CRAN isn't down.
api_pkgs <- tools::CRAN_package_db() |> 
  dplyr::as_tibble() |> 
  dplyr::filter(stringr::str_detect(tolower(Description), "\\bapi\\b")) |> 
  dplyr::select(Package, Description)
nrow(api_pkgs)
head(api_pkgs)
```

## Searching the R Universe {-}

-   Web interface at https://r-universe.dev/
-   API in {universe} package? (broken as of 2023-11-13)
-   API at `https://r-universe.dev/stats/powersearch`

## Searching the R Universe API {-}

```{r pkgs-r-universe}
resp <- request("https://r-universe.dev") |> 
  req_url_path_append("stats/powersearch") |>
  req_url_query(q = "api") |> 
  req_perform() |> 
  resp_body_json()

uni_api_pkgs <- tibble(pkg = resp$results) |> 
  unnest_wider(pkg) |> 
  filter(str_detect(tolower(Description), "\\bapi\\b")) |> 
  distinct(Package, Description)

nrow(uni_api_pkgs)
head(uni_api_pkgs)
```

## anyapi {-}

-   {anyapi} package wraps these functions
    -   (technically not yet)
-   If package doesn't exist
    -   Search for API spec
    -   Create package on-the-fly to interact with the API
